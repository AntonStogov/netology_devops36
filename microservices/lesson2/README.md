# Домашнее задание к занятию «Микросервисы: принципы»
---

#### Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры. Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway
#### Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

#### Решение должно соответствовать следующим требованиям:

#### - маршрутизация запросов к нужному сервису на основе конфигурации,
#### - возможность проверки аутентификационной информации в запросах,
#### - обеспечение терминации HTTPS.
#### Обоснуйте свой выбор.

#### Ответ: 
#### Из популярных решений Kong, NGINX, Traefik и AWS API Gateway.

```
| Возможности               | Kong                          | NGINX                      | Traefik                   | AWS API Gateway         |
|---------------------------|-------------------------------|----------------------------|---------------------------|-------------------------|
| Маршрутизация запросов    | Да                            | Да                         | Да                        | Да                      |
| Проверка аутентификации   | Да (через плагины OAuth2, JWT)| Да (с помощью модулей)     | Да (встроенная поддержка) | Да (AWS IAM, OAuth2)    |
| Терминация HTTPS          | Да                            | Да                         | Да                        | Да                      |
| Управление через API      | Да                            | Ограничено                 | Да                        | Да                      |
| Масштабируемость          | Высокая                       | Высокая                    | Высокая                   | Высокая (облако AWS)    |
| Простота настройки        | Средняя                       | Средняя                    | Высокая                   | Средняя                 |
| Лицензия                  | Open Source, платные плагины  | Open Source, платные модули| Open Source               | Платное                 |
```
#### Я бы выбрал Kong, так как он удовлетворяет всем требованиям:

#### - Легко настраиваемая маршрутизация запросов на основе конфигурации.
#### - Поддержка аутентификации через встроенные плагины (OAuth2, JWT).
#### - Возможность терминировать HTTPS без дополнительного ПО.
#### - Open Source с довольно мощной поддержкой сообщества.
#### Обоснование: Kong обеспечивает гибкость, масштабируемость и удобство управления через API, что важно для микросервисной архитектуры. При необходимости можно докупить коммерческие модули для расширения функциональности.

---

## Задача 2: Брокер сообщений
#### Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

#### Решение должно соответствовать следующим требованиям:

#### - поддержка кластеризации для обеспечения надёжности,
#### - хранение сообщений на диске в процессе доставки,
#### - высокая скорость работы,
#### - поддержка различных форматов сообщений,
#### - разделение прав доступа к различным потокам сообщений,
#### - простота эксплуатации.
#### Обоснуйте свой выбор.

#### Ответ:

```
| Возможности                  | RabbitMQ        | Apache Kafka    | ActiveMQ        | NATS            |
|------------------------------|-----------------|-----------------|-----------------|-----------------|
| Кластеризация                | Да              | Да              | Да              | Да              |
| Хранение сообщений           | Да              | Да              | Да              | Частично        |
| Скорость работы              | Высокая         | Очень высокая   | Средняя         | Очень высокая   |
| Форматы сообщений            | JSON, XML, AMQP | JSON, Avro,     |                 |                 |
|                              |                 |Protobuf         | JSON, XML       | JSON            |
| Разделение прав доступа      | Да              | Да              | Да              | Ограничено      |
| Простота эксплуатации        | Средняя         | Средняя         | Средняя         | Высокая         |
```

#### Я выбираю RabbitMQ, так как он:

#### - Обеспечивает надёжную кластеризацию и хранение сообщений на диске.
#### - Работает быстро, поддерживает различные форматы сообщений.
#### - Предоставляет гибкое управление правами доступа.
#### Обоснование: RabbitMQ обладает оптимальным соотношением производительности, надёжности и простоты настройки. Он хорошо поддерживается сообществом и имеет широкий спектр интеграций, что делает его удобным для DevOps.

---

